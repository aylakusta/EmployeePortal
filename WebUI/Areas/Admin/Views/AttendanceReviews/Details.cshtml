@model WebUI.Models.Attendance
@using WebUI.Models
@{
    ViewData["Title"] = "Bildirim Detayı";
    string label = Model.Reason switch {
      AttendanceReason.Report => "Rapor",
      AttendanceReason.Bereavement => "Yakın Vefatı",
      AttendanceReason.Birth => "Doğum",
      _ => "Mazeret"
    };
}
<div class="card shadow-sm">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h3 class="mb-0">@ViewData["Title"]</h3>
    <a asp-area="Admin" asp-controller="AttendanceReviews" asp-action="Index" class="btn btn-secondary btn-sm">Geri</a>
  </div>
  <div class="card-body">
    <dl class="row">
      <dt class="col-sm-3">Tarih</dt>
      <dd class="col-sm-9">@Model.CreatedAt.ToLocalTime()</dd>

      <dt class="col-sm-3">Mazeret</dt>
      <dd class="col-sm-9">@label</dd>

      <dt class="col-sm-3">Açıklama</dt>
      <dd class="col-sm-9">@Model.Description</dd>

      <dt class="col-sm-3">Talep</dt>
      <dd class="col-sm-9">
        @if (Model.DocumentRequestId.HasValue)
        {
            <a asp-area="Admin" asp-controller="DocumentRequests" asp-action="Details" asp-route-id="@Model.DocumentRequestId" class="btn btn-sm btn-outline-secondary">Talebi Aç</a>
        }
        else { <span class="text-muted">—</span> }
      </dd>

      <dt class="col-sm-3">Durum</dt>
      <dd class="col-sm-9">@((Model.IsResolved) ? "Tamamlandı" : "Bekliyor")</dd>
    </dl>

    <div class="d-flex gap-2">
      @if (!Model.IsResolved)
      {
        <form asp-area="Admin" asp-controller="AttendanceReviews" asp-action="MarkResolved" asp-route-id="@Model.Id" method="post">
          @Html.AntiForgeryToken()
          <button class="btn btn-success">Tamamlandı</button>
        </form>
      }
      else
      {
        <form asp-area="Admin" asp-controller="AttendanceReviews" asp-action="Reopen" asp-route-id="@Model.Id" method="post">
          @Html.AntiForgeryToken()
          <button class="btn btn-outline-secondary">Yeniden Aç</button>
        </form>
      }
    </div>
  </div>
</div>
